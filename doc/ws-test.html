<!DOCTYPE html>
<html>
<head>
    <script>
        var socket;
        if (window.WebSocket) {
            <!-- 本地环境 -->
            var ws = new WebSocket("ws://127.0.0.1:20038/ws?userId=1");

            socket = ws;
            ws.onopen = function () {
                console.log('连接建立');
            };
            ws.onmessage = function (evt) {
                var received_msg = evt.data;
                document.getElementById("showMes").value += evt.data + "\n";
            };
            ws.onclose = function () {
                alert("连接断开");
            };
        } else {
            alert("浏览器不支持WebSocket");
        }

        function sendMes() {
            var message = document.getElementById("mes").value;
            socket.send(message);
        }
    </script>
</head>

<body>
<br/>
<label>名称:</label>
<input type="text" id="name"/>
<br/>
<label>输入:</label>
<br/>
<textarea rows="10" cols="10" id="mes" style="width:300px;height:150px;"></textarea>
<button onclick="sendMes();">发送</button>
<br/>
<label>收到消息:</label>
<br/>
<textarea rows="20" cols="10" id="showMes" style="width:300px;height:200px;"></textarea>
</body>
</html>